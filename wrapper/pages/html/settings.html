<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<link rel="icon" href="../../favicon.ico" type="image/png" />
		<title>Settings</title>
		<meta name="description" content="Wrapper: Offline's settings" />
		<link rel="stylesheet" type="text/css" href="../css/modern-normalize.css" />
		<link rel="stylesheet" type="text/css" href="../css/global.css" />
		<script src="../js/jquery.js"></script>
		<script src="../js/global.js"></script>
	</head>
	<body>
		<header>
			<a href="/">
				<h1 style="margin:0"><img id="logo" src="../img/logo.svg" alt="Wrapper: Offline" /></h1>
			</a>
		</header>
		<main>			
			<nav class="tabs_contain">
				<div class="tab_buttons">
					<h1 id="settings">Settings</h1>
					<a class="selected" href="#" data-triggers="0">Features</a>
					<a href="#" data-triggers="1">Appearance</a>
					<a href="#" data-triggers="2">My Library</a>
				</div>
				<nav class="tab" style="display:block">
					<h2>Features</h2>
					<p>Short themelist: <span id="shortthemelist"></span></p>
				</nav>
				<nav class="tab">
					<h2>Appearance</h2>
					<p>Dark mode: <span id="darkmode" data-meth="localStorage"></span></p>
				</nav>
				<nav class="tab">
					<nav class="tabs_contain">
						<div class="tab_buttons">
							<h1>My Library</h1>
							<a href="#" data-triggers="bg">Backgrounds</a>
							<a href="#" data-triggers="char">Characters</a>
							<a href="#" data-triggers="sound">Sounds</a>
							<a href="#" data-triggers="prop">Watermarks</a>
						</div>
						<nav class="tab">
							<h2>Appearance</h2>
							<p>Dark mode: <span id="darkmode"></span></p>
						</nav>
					</nav>
				</nav>
			</nav>
		</main>
	</body>
	<script>
		getSettingData();

		// toggling
		$("span").click(function (event) {
			if (event.target.id == "darkmode")
				toggleDarkMode();
			else if (event.target["data-meth"] == "localStorage")
				togLocStor(event.target.id);
			else
				togCookie(event.target.id);
		});

		function togLocStor(name) {
			if (!localStorage.getItem(name))
				localStorage.setItem(name, 1);
			else
				localStorage.removeItem(name);
			getSettingData();
		}
		function togCookie(name) {
			if ($.cookie(name) == 1)
				$.cookie(name, 0);
			else
				$.cookie(name, 1);
			getSettingData();
		}
		// add indicator
		function getSettingData() {
			const toggles = $("span");
			console.log(toggles);

			toggles.each(function (i) {
				const elem = $(this);
				const name = elem.attr("id");
				if (localStorage.getItem(name)) {
					elem.css("color", "green");
					elem.html("On");
				} else {
					elem.css("color", "red");
					elem.html("Off");
				}
			})
			return true;
		}
	</script>
</html>
